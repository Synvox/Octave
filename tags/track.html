<track>
  <div class="cell">{ data.name }</div>
  <div class="cell">{ data.album }</div>
  <div class="cell">{ data.artist }</div>

  <style type="less">
    track {
      cursor: pointer;
      overflow: hidden;
      color: #000;
      display: block;
      width: 100%;

      &:nth-child(even) {
        background: rgba(0,0,0,.01);
      }
      &:hover {
        color: black;
        background: rgba(0,0,0,.1);
      }
      &.active {
        color: #fff;
        background: #704FDC;
        text-shadow: 0px 1px 1px darken(#704FDC,5%);
        box-shadow: 0px .5px 0px 1px darken(#704FDC,5%) inset;
      }
      .cell {
        overflow: hidden;
        text-overflow: ellipsis;
        overflow: hidden;
      }
    }
  </style>
  <script>
    var self = this
    self.data = self.opts.data
    self.index = self.opts.index
    // self.time = new Date(self.data['Total Time'])
    // self.timeStr = self.time.getMinutes() + ':' + ((self.time.getSeconds()<10)? '0':'') + self.time.getSeconds()

    var $r = $(self.root)

    self.active = false
    self.select = ()=>{
      if (self.active) return
      App.trigger('select_track',self.data)
    }
    $r.click(self.select);

    App.on('selected_track',function(data){
      if (data !== self.data) return;

      self.active = true
      $r.addClass('active')

      App.one('select_track',function(){
        self.active = false
        $r.removeClass('active')
        self.update()
      })

      self.update()
    })

    self.playPause = ()=>{
      $r.find('.circle').toggleClass('playing')
      window.setTimeout(()=>{
        App.trigger('play_pause')
      },1)
    }

  </script>
</track>
